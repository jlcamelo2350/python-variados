<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hub de Dashboards</title>
  <style>
    :root{
      --bg:#f6f7fb; --card:#ffffff; --ink:#1f2937; --muted:#6b7280; --ring:#e5e7eb;
      --brand:#0ea5e9; --brand-2:#22c55e; --brand-3:#8b5cf6; --brand-4:#f59e0b;
      --radius:18px; --shadow: 0 6px 18px rgba(0,0,0,.06);
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
    a{text-decoration:none;color:inherit}
    .wrap{max-width:1100px;margin:40px auto;padding:0 20px}
    header{display:flex;align-items:center;gap:14px;margin-bottom:22px}
    .logo{width:42px;height:42px;border-radius:12px;background:linear-gradient(135deg,var(--brand),var(--brand-3));display:grid;place-items:center;color:#fff;font-weight:700}
    h1{font-size:24px;margin:0}
    .sub{color:var(--muted);margin-top:-2px}

    .toolbar{display:flex;gap:12px;flex-wrap:wrap;margin:18px 0 22px}
    .btn{padding:10px 12px;border:1px solid var(--ring);border-radius:12px;background:#fff;cursor:pointer}

    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
    .card{background:var(--card);border:1px solid var(--ring);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px;transition:transform .08s ease, box-shadow .08s ease}
    .card:hover{transform:translateY(-2px);box-shadow:0 10px 24px rgba(0,0,0,.08)}
    .title{font-weight:800;font-size:20px}
    .desc{color:var(--muted);font-size:14px}
    .badge{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;border:1px solid var(--ring);font-size:12px;background:#f1f5f9}

    .list{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:14px}
    .item{background:#fff;border:1px solid var(--ring);border-radius:14px;padding:14px;display:flex;flex-direction:column;gap:6px}
    .item .item-title{font-weight:700}
    .item .item-desc{color:var(--muted);font-size:13px}
    .open{margin-top:8px;display:inline-block;text-align:center;color:#fff;padding:10px 12px;border-radius:10px;background:var(--brand)}

    .back{display:inline-flex;align-items:center;gap:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">HB</div>
      <div>
        <h1>Hub de Dashboards</h1>
        <div class="sub">Atalhos r√°pidos para os principais pain√©is.</div>
      </div>
    </header>

    <div id="content"></div>
  </div>

  <script>
    // ==========================================
    // Modelo de dados (folders aninhados + links)
    // ==========================================
    const SECTIONS = {
      varejo: {
        name: 'Desempenho do Varejo',
        desc: 'KPIs gerais, metas, YoY, lojas e vendedoras.',
        color: '#0ea5e9',
        items: [
          { kind:'link',  title:'Dashboard Desempenho Geral', desc:'Painel consolidado do varejo.', url:'https://app.powerbi.com/view?r=eyJrIjoiZDgzZjc4ZTAtNjFlYi00ODkxLWJhNjQtZTY3YWYyZjM4NzdiIiwidCI6IjFkYmZiOTM5LTM5MWMtNDcwZC05MmRmLTlhZjQ5NzVlMjdjNSJ9' },
          { kind:'folder', title:'Dashboard das Gerentes', desc:'Dashboards por loja (uma p√°gina por filial).', key:'gerentes',
            children:[
              { title:'Loja Leblon', desc:'Painel da loja Leblon.', url:'https://app.powerbi.com/view?r=eyJrIjoiMTM4ODExNzQtOGNjMy00YWY5LTlmYjgtMzI1MWM0MGI5MDVmIiwidCI6IjFkYmZiOTM5LTM5MWMtNDcwZC05MmRmLTlhZjQ5NzVlMjdjNSJ9' },
              { title:'Loja JK',     desc:'Painel da loja JK.',     url:'https://app.powerbi.com/view?r=eyJrIjoiN2VlMWU3YzktNDA2Yi00MTQ5LTlhODQtNTk3YWE2ZjIzMDA5IiwidCI6IjFkYmZiOTM5LTM5MWMtNDcwZC05MmRmLTlhZjQ5NzVlMjdjNSJ9' },
              { title:'Loja RDB',    desc:'Painel da loja RDB.',    url:'https://app.powerbi.com/view?r=eyJrIjoiOTA4NGRkMjgtZDM0Zi00ZTlhLTg4NzQtMDAwMmNkZDhhYzljIiwidCI6IjFkYmZiOTM5LTM5MWMtNDcwZC05MmRmLTlhZjQ5NzVlMjdjNSJ9' }
            ]
          }
        ]
      },
      produtos: {
        name: 'Produtos & Estoque',
        desc: 'Mix de produtos, giros e estoque por loja/cole√ß√£o.',
        color: '#22c55e',
        items: [
          { kind:'link', title:'Dashboard de Produtos', desc:'Desempenho de produtos e estoque.', url:'https://app.powerbi.com/view?r=eyJrIjoiNzg0MjMzYjAtMzY0Ny00MDVlLTk1NTEtYzJlNDYwOWQzNDhkIiwidCI6IjFkYmZiOTM5LTM5MWMtNDcwZC05MmRmLTlhZjQ5NzVlMjdjNSJ9' }
        ]
      },
      despesas: {
        name: 'Despesas do Varejo',
        desc: 'Custos, despesas e rentabilidade.',
        color: '#f59e0b',
        items: [
          { kind:'link', title:'Dashboard de Despesas', desc:'Resumo por centro de custo.', url:'https://app.powerbi.com/view?r=eyJrIjoiY2M3YzUzZWEtODljYi00NTc2LWEwNzgtMTFkNGZlZTQ3MjNlIiwidCI6IjFkYmZiOTM5LTM5MWMtNDcwZC05MmRmLTlhZjQ5NzVlMjdjNSJ9' }
        ]
      },
      clientes: {
        name: 'Clientes & CRM',
        desc: 'Perfis, clusters, recorr√™ncia e LTV.',
        color: '#8b5cf6',
        items: [
          { kind:'folder', title:'Clientes', desc:'Painel principal e an√°lises complementares.', key:'clientes',
            children:[
              { kind:'link', title:'Dashboard de Clientes', desc:'Vis√£o geral de clientes.', url:'https://app.powerbi.com/view?r=eyJrIjoiNzdkMjJkMzMtZGZhYi00YmUyLTkzMjQtZTlhNGUyZWJlNzYyIiwidCI6IjFkYmZiOTM5LTM5MWMtNDcwZC05MmRmLTlhZjQ5NzVlMjdjNSJ9' },
              { kind:'folder', title:'An√°lises com Python', desc:'Links de an√°lises no Colab.', key:'analises-python',
                children:[
                  { title:'An√°lise de Clusters no Tempo', desc:'Descreve o desenvolvimento do n√∫mero de clientes por clusters ao longo dos anos (2021-2025).', url:'https://colab.research.google.com/drive/1IIAspcojPGn0iRZ6WWt5CCdY9Vakdd19#scrollTo=7zPu9tWonIg7' },
                  { title:'An√°lise da Participa√ß√£o dos Clusters nas Vendas das Lojas', desc:'Analisa a composi√ß√£o de Clientes das Lojas dado a segmenta√ß√£o adotada (F√ÉS, PREMIUMS etc)', url:'https://colab.research.google.com/drive/1VhV6fBvGC1QnEz7Lrqedr6NzwY631Gpi#scrollTo=D_PrNp0pGqYt' },
                  { title:'Futuras An√°lises', desc:'', url:'' }
                ]
              },
              { kind:'link', title:'Futura nova subse√ß√£o', desc:'', url:'' }
            ]
          }
        ]
      }
    };

    // ==========================================
    // Helpers de UI (suporta profundidade ilimitada)
    // ==========================================
    const content = document.getElementById('content');

    function iconFor(key){
      switch(key){ case 'varejo':return 'üìà'; case 'produtos':return 'üì¶'; case 'despesas':return 'üí∏'; case 'clientes':return 'üë•'; default:return 'üîó'; }
    }

    function home(){
      const entries = Object.entries(SECTIONS);
      content.innerHTML = `<div class="grid">${entries.map(([k,s])=>
        `<a class="card" href="#/s/${k}">
          <span class="badge" style="border-color:${s.color}33;background:${s.color}11">${iconFor(k)} ${s.name}</span>
          <div class="title">${s.name}</div>
          <div class="desc">${s.desc}</div>
        </a>`
      ).join('')}</div>`;
    }

    function slugify(txt){ return (txt||'').toLowerCase().replace(/[^a-z0-9_-]+/g,'-'); }

    function cardForItem(sectionKey, it, color, pathKeys){
      if(it.kind === 'link' || !it.kind){
        return `<a class="card" href="${it.url}" target="_blank" rel="noopener">
          <span class="badge" style="border-color:${color}33;background:${color}11">üîó Link direto</span>
          <div class="title">${it.title}</div>
          <div class="desc">${it.desc||''}</div>
        </a>`;
      }
      const fkey = it.key || slugify(it.title);
      const nextPath = [...pathKeys, fkey].join('/');
      return `<a class="card" href="#/s/${sectionKey}/f/${nextPath}">
        <span class="badge" style="border-color:${color}33;background:${color}11">üóÇÔ∏è Sub-se√ß√£o</span>
        <div class="title">${it.title}</div>
        <div class="desc">${it.desc||''}</div>
      </a>`;
    }

    // >>>>>>>>> Fun√ß√£o corrigida (Voltar funciona em todos os n√≠veis)
    function renderList(sectionKey, color, items, pathKeys = []) {
      let backHash;
      if (pathKeys.length === 0) {
        backHash = '#';                         // se√ß√£o -> home
      } else if (pathKeys.length === 1) {
        backHash = `#/s/${sectionKey}`;         // 1¬™ subpasta -> se√ß√£o
      } else {
        backHash = `#/s/${sectionKey}/f/${pathKeys.slice(0, -1).join('/')}`; // demais -> um n√≠vel acima
      }

      const trail = pathKeys.length ? ` ‚Ä∫ ${pathKeys.join(' ‚Ä∫ ')}` : '';
      const cards = items.map(it => cardForItem(sectionKey, it, color, pathKeys)).join('');

      content.innerHTML = `
        <div class="toolbar">
          <a class="back btn" href="${backHash}">‚¨ÖÔ∏è Voltar</a>
          <span class="badge" style="border-color:${color}33;background:${color}11">
            ${iconFor(sectionKey)} ${SECTIONS[sectionKey].name}${trail}
          </span>
        </div>
        <div class="grid">${cards}</div>
      `;
    }
    // <<<<<<<<< fim da fun√ß√£o corrigida

    function findFolderByPath(sectionKey, keys){
      let items = SECTIONS[sectionKey]?.items || [];
      let folder = null;
      for(const k of keys){
        folder = items.find(it => it.kind==='folder' && (it.key || slugify(it.title)) === k);
        if(!folder) return null;
        items = folder.children || [];
      }
      return folder || { children: items };
    }

    function sectionPage(sectionKey){
      const s = SECTIONS[sectionKey]; if(!s){ home(); return; }
      renderList(sectionKey, s.color, s.items, []);
    }

    function folderPage(sectionKey, pathStr){
      const s = SECTIONS[sectionKey]; if(!s){ home(); return; }
      const keys = (pathStr||'').split('/').filter(Boolean);
      const folder = findFolderByPath(sectionKey, keys);
      if(!folder){ sectionPage(sectionKey); return; }
      renderList(sectionKey, s.color, folder.children || [], keys);
    }

    // ==========================================
    // Router (suporta #/s/{sec}/f/{k1}/{k2}/...)
    // ==========================================
    function router(){
      const h = location.hash;
      const mFolder = h.match(/^#\/s\/([a-z]+)\/f\/(.+)$/);
      const mSection = h.match(/^#\/s\/([a-z]+)$/);
      if(mFolder){ folderPage(mFolder[1], mFolder[2]); return; }
      if(mSection){ sectionPage(mSection[1]); return; }
      home();
    }

    addEventListener('hashchange', router);
    router();
  </script>
</body>
</html>
